# üì° Mege API Gateway

**Mege API Gateway** ‚Äì —à–ª—é–∑ API –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å IP –ê–¢–° **3CX** –Ω–∞–ø—Ä—è–º—É—é –∏ —á–µ—Ä–µ–∑ **Asterisk**.  

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª API Gateway

‚úÖ **–ü–æ–ª—É—á–µ–Ω–∏–µ CDR (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏) –∑–≤–æ–Ω–∫–æ–≤** ‚Äì —Å–±–æ—Ä –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ –≤—ã–∑–æ–≤–∞—Ö —Å IP –ê–¢–° **3CX**.  
‚úÖ **–ò–Ω–∏—Ü–∏–∞—Ü–∏—è –≤—ã–∑–æ–≤–∞** ‚Äì –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∑–≤–æ–Ω–∫–æ–≤ –º–µ–∂–¥—É –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º–∏ –∏ –≤–Ω–µ—à–Ω–∏–º–∏ –Ω–æ–º–µ—Ä–∞–º–∏.  
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Asterisk** ‚Äì —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞–º–∏ —á–µ—Ä–µ–∑ **ARI API**.  
‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ gRPC** ‚Äì –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏ **PAC**.  
‚úÖ **–†–∞–±–æ—Ç–∞ —Å –∑–∞–ø–∏—Å—è–º–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤** ‚Äì –¥–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª–∞–º –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤.  

---

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`.env`)

### –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API
| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è        | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------------|-------------------------------------------------|
| `APP_PORT`       | –ü–æ—Ä—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º —Ä–∞–±–æ—Ç–∞–µ—Ç API |
| `HTTP_OPTIONS`   | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ HTTP (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ) |
| `API_PREFIX`     | –ü—Ä–µ—Ñ–∏–∫—Å API –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ |
| `PAC_HOST`       | –•–æ—Å—Ç PAC-—Å–µ—Ä–≤–∏—Å–∞ |

---

### üîß –î–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ IP –ê–¢–° **3CX**
| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è               | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------------------|--------------------------------------|
| `PBX_EXTENSION_LENGTH` | –†–∞–∑–º–µ—Ä –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –Ω–æ–º–µ—Ä–∞ |
| `PBX_RECORDING_PATH`   | –ü—É—Ç—å –∫ –∑–∞–ø–∏—Å—è–º —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤ |

---

### üì° –î–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ IP –ê–¢–° **Asterisk**
| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è                           | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------------------------------|------------------------------------------|
| `ASTERISK_ARI_HOST`                | ARI-—Ö–æ—Å—Ç Asterisk |
| `ASTERISK_ARI_PORT`                | ARI-–ø–æ—Ä—Ç Asterisk |
| `ASTERISK_ARI_CALL_USER`           | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è –∑–≤–æ–Ω–∫–æ–≤ |
| `ASTERISK_ARI_CALL_PROVIDER_NAME`  | –ò–º—è ARI-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –¥–ª—è –∑–≤–æ–Ω–∫–æ–≤ |
| `ASTERISK_ARI_CALL_PASSWORD`       | –ü–∞—Ä–æ–ª—å Asterisk –¥–ª—è –∑–≤–æ–Ω–∫–æ–≤ |

#### ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç—Ä–∞–Ω–∫–∞ –¥–ª—è 3CX
| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è                           | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------------------------------|------------------------------------------|
| `ASTERISK_PBX3CX_TRUNK_ID`         | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç—Ä–∞–Ω–∫–∞ |
| `ASTERISK_PBX3CX_OUTGOING_CONTEXT` | –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏—Å—Ö–æ–¥—è—â–∏—Ö –∑–≤–æ–Ω–∫–æ–≤ |
| `ASTERISK_PBX3CX_OUTGOING_TIMEOUT` | –¢–∞–π–º–∞—É—Ç –∏—Å—Ö–æ–¥—è—â–∏—Ö –∑–≤–æ–Ω–∫–æ–≤ |

---

## üì¶ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **NestJS** ‚Äì –º–æ–¥—É–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Prisma ORM** ‚Äì —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **Asterisk ARI** ‚Äì —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞–º–∏ —á–µ—Ä–µ–∑ Asterisk
- **PAC gRPC** ‚Äì –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å PAC-—Å–µ—Ä–≤–∏—Å–∞–º–∏
- **CDR API 3CX** ‚Äì –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –∑–≤–æ–Ω–∫–∞—Ö

---

## ‚ö° –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1Ô∏è‚É£ –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```sh
git clone https://github.com/ProVitSer/mege-api-gateway.git
cd mege-api-gateway
npm install
